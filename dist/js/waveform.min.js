!function t(e,i,n){function s(r,h){if(!i[r]){if(!e[r]){var a="function"==typeof require&&require;if(!h&&a)return a(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return s(i?i:t)},l,l.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){!function(n,s){"function"==typeof define&&define.amd?define(s):"object"==typeof i?e.exports=s(t,i,e):n.Observant=s()}(this,function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(){n(this,t),this.observers={}}return s(t,[{key:"observe",value:function(t,e){return this.observers[t]||(this.observers[t]=[]),this.observers[t].push(e),this}},{key:"ignore",value:function(t,e){var i=-1;return 1==arguments.length?(delete this.observers[t],this):(this.observers[t]&&(i=this.observers[t].indexOf(e),-1!=i&&(this.observers[t][i]=null)),this)}},{key:"notify",value:function(t,e){var i=this.observers[t];if(!i)return this;for(var n=0;n<i.length;)null!=i[n]&&i[n](e),++n;for(n=0;n<i.length;)null==i[n]&&i.splice(n,1),++n;i.length<1&&delete this.observers[t]}}]),t}();return o})},{}],2:[function(t,e,i){(function(i){var n,s,o=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty,a=[].slice;n=t("observant"),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/30)}}(),s=function(t){function e(t){if(this.onMouseDown=o(this.onMouseDown,this),this.onMouseOver=o(this.onMouseOver,this),this.onMouseUp=o(this.onMouseUp,this),this.onMouseOut=o(this.onMouseOut,this),this.render=o(this.render,this),e.__super__.constructor.call(this),this.container=t.container,this.canvas=t.canvas,this.data=t.data||[],this.wavesCollection=this.data,this.outerColor=t.outerColor||"transparent",this.reflection=t.reflection||0,this.interpolate=t.interpolate||!0,this.bindResize=t.bindResize||!1,t.interpolate===!1&&(this.interpolate=!1),!this.canvas){if(!this.container)throw"Either canvas or container option must be passed";this.canvas=this.createCanvas(this.container,t.width||this.container.clientWidth,t.height||this.container.clientHeight)}this.context=this.canvas.getContext("2d"),this.width=parseInt(this.context.canvas.width,10),this.height=parseInt(this.context.canvas.height,10),this.waveWidth=2,this.iGutterWidth=1,this.colors={},this.events={},this.active=-1,this.selected=-1,this.isDragging=!1,this.isPlaying=!1,this.hasStartedPlaying=null,this.isFocus=!1,this.initialize()}return r(e,t),e.WAVE_FOCUS="wave-focus",e.WAVE="wave",e.WAVE_ACTIVE="wave-active",e.WAVE_SELECTED="wave-selected",e.GUTTER="gutter",e.GUTTER_ACTIVE="gutter-active",e.GUTTER_SELECTED="gutter-selected",e.REFLECTION="reflection",e.REFLECTION_ACTIVE="reflection-active",e.EVENT_READY="ready",e.EVENT_CLICK="click",e.EVENT_HOVER="hover",e.EVENT_RESIZED="hover",e.prototype.initialize=function(){this.updateHeight(),this.setColors(),this.bindEventHandlers(),this.cache(),this.redraw(),this.bindResize===!0&&this.bindContainerResize(),this.fireEvent(e.EVENT_READY)},e.prototype.bindContainerResize=function(){window.addEventListener("resize",function(t){return function(){var i;return i=t.container.clientWidth,t.update({width:i}),t.redraw(),t.notify(e.EVENT_RESIZED,i)}}(this))},e.prototype.setColors=function(){this.setColor(e.WAVE_FOCUS,"#333333"),this.setGradient(e.WAVE,["#666666",0,"#868686",1]),this.setGradient(e.WAVE_ACTIVE,["#FF3300",0,"#FF5100",1]),this.setGradient(e.WAVE_SELECTED,["#993016",0,"#973C15",1]),this.setGradient(e.GUTTER,["#6B6B6B",0,"#c9c9c9",1]),this.setGradient(e.GUTTER_ACTIVE,["#FF3704",0,"#FF8F63",1]),this.setGradient(e.GUTTER_SELECTED,["#9A371E",0,"#CE9E8A",1]),this.setColor(e.REFLECTION,"#999999"),this.setColor(e.REFLECTION_ACTIVE,"#FFC0A0")},e.prototype.setColor=function(t,e){return this.colors[t]=e},e.prototype.setGradient=function(t,e){var i,n;for(i=this.context.createLinearGradient(0,this.waveOffset,0,0),n=0;n<e.length;)i.addColorStop(e[n+1],e[n]),n+=2;this.colors[t]=i},e.prototype.redraw=function(){requestAnimationFrame(this.render)},e.prototype.render=function(){var t,i,n,s,o,r,h,a,c,l,u,d;for(s=0,h=this.wavesCollection,l=this.width/this.data.length,u=0,d=this.waveOffset,this.clear(),o=0,r=h.length,c=[];r>o;)t=h[o],i=h[o+1],this.selected>0&&this.selected<=o&&o<this.active||this.selected>o&&o>=this.active?this.context.fillStyle=this.colors[e.WAVE_SELECTED]:this.active>o?this.context.fillStyle=this.colors[e.WAVE_ACTIVE]:this.context.fillStyle=this.colors[e.WAVE_FOCUS],this.context.fillRect(u,d,this.waveWidth,t),this.selected>0&&this.selected<=o&&o<this.active||this.selected>o&&o>=this.active?this.context.fillStyle=this.colors[e.GUTTER_SELECTED]:this.active>o?this.context.fillStyle=this.colors[e.GUTTER_ACTIVE]:this.context.fillStyle=this.colors[e.GUTTER],n=Math.max(t,i),this.context.fillRect(u+this.waveWidth,d,this.iGutterWidth,n),this.reflection>0&&(a=Math.abs(t)/(1-this.reflection)*this.reflection,this.active>s?this.context.fillStyle=this.colors[e.REFLECTION_ACTIVE]:this.context.fillStyle=this.colors[e.REFLECTION],this.context.fillRect(u,d,this.waveWidth,a)),u+=this.waveWidth+this.iGutterWidth,c.push(o++);return c},e.prototype.clear=function(){return this.context.fillStyle=this.outerColor,this.context.clearRect(0,0,this.width,this.height),this.context.fillRect(0,0,this.width,this.height)},e.prototype.setData=function(t){return this.data=t},e.prototype.getData=function(){return this.data},e.prototype.setDataInterpolated=function(t){return this.setData(this.interpolateArray(t,this.width))},e.prototype.setDataCropped=function(t){return this.setData(this.expandArray(t,this.width))},e.prototype.linearInterpolate=function(t,e,i){return t+(e-t)*i},e.prototype.expandArray=function(t,e,i){var n,s,o,r;if(n=void 0,s=void 0,o=void 0,r=void 0,null===i&&(i=0),o=[],t.length>e)o=t.slice(t.length-e,t.length);else for(n=s=0,r=e-1;r>=0?r>=s:s>=r;)o[n]=t[n]||i,n=r>=0?++s:--s;return o},e.prototype.interpolateArray=function(t,e){var i,n,s,o,r,h,a;for(i=void 0,n=void 0,s=void 0,o=void 0,r=void 0,h=void 0,a=void 0,r=[],h=new Number((t.length-1)/(e-1)),r[0]=t[0],o=1;e-1>o;)a=o*h,s=new Number(Math.floor(a)).toFixed(),i=new Number(Math.ceil(a)).toFixed(),n=a-s,r[o]=this.linearInterpolate(t[s],t[i],n),o++;return r[e-1]=t[t.length-1],r},e.prototype.putDataIntoWaveBlock=function(){var t,e,i,n,s,o,r,h,a,c,l;for(o=this.waveWidth+this.iGutterWidth,t=this.getData(),c=[],r=Math.ceil(t.length/o),s=0;r>s;){for(l=0,h=0;o>h;)a=s*o+h,l+=t[a],h++;i=l/o,e=i*this.waveHeight,n=Math.floor(-Math.abs(e)),c.push(n),s++}return c},e.prototype.cache=function(){this.interpolate===!1?this.setDataCropped(this.data):this.setDataInterpolated(this.data),this.wavesCollection=this.putDataIntoWaveBlock(this.data)},e.prototype.update=function(t){t&&(t.gutterWidth&&(this.gutterWidth=t.gutterWidth),t.waveWidth&&(this.waveWidth=t.waveWidth),t.width&&(this.width=t.width,this.canvas.width=this.width),t.height&&(this.height=t.height,this.canvas.height=this.height),(0===t.reflection||t.reflection)&&(this.reflection=t.reflection),t.interpolate&&(this.interpolate=this.options.interpolate),(t.gutterWidth||t.waveWidth||t.width||t.height||t.reflection||t.interpolate||0===t.reflection)&&this.cache(),(t.height||t.reflection||0===t.reflection)&&this.updateHeight()),this.redraw()},e.prototype.updateHeight=function(){this.waveOffset=Math.round(this.height-this.height*this.reflection),this.reflectionHeight=Math.round(this.height-this.waveOffset),this.waveHeight=this.height-this.reflectionHeight},e.prototype.createCanvas=function(t,e,i){var n;return n=document.createElement("canvas"),t.appendChild(n),n.width=e,n.height=i,n},e.prototype.getMouseClickPosition=function(t){var e,i,n,s;return e=this.canvas,i=e.getBoundingClientRect(),n=Math.round((t.clientX-i.left)/(i.right-i.left)*e.width),s=Math.round((t.clientY-i.top)/(i.bottom-i.top)*e.height),[n,s]},e.prototype.calcPercent=function(){return Math.round(this.clickPercent*this.width/(this.waveWidth+this.iGutterWidth))},e.prototype.fireEvent=function(){var t,e;e=arguments[0],t=2<=arguments.length?a.call(arguments,1):[],this.notify(e,t)},e.prototype.bindEventHandlers=function(){return this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("mousemove",this.onMouseOver),this.canvas.addEventListener("mouseout",this.onMouseOut),this.canvas.addEventListener("mouseup",this.onMouseUp)},e.prototype.onMouseOut=function(t){this.selected=-1,this.redraw()},e.prototype.onMouseUp=function(t){this.isDragging=!1},e.prototype.onMouseOver=function(t){var i,n,s,o;return this.hasStartedPlaying===!0&&this.isPaused()===!0?!0:(i=this.getMouseClickPosition(t),o=i[0],s=this.getWaveClicked(o),n=this.getMousePosTrackTime(o),this.fireEvent(e.EVENT_HOVER,n,s),this.isDragging===!0?(this.selected=-1,this.clickPercent=o/this.width,this.active=this.calcPercent()):this.selected=s,void this.redraw())},e.prototype.onMouseDown=function(t){var i,n;this.isDragging=!0,i=this.getMouseClickPosition(t),n=i[0],this.clickPercent=n/this.width,this.fireEvent(e.EVENT_CLICK,100*this.clickPercent),this.active=this.calcPercent(),this.redraw()},e.prototype.setPlaying=function(t){null==t&&(t=!0),this.isPlaying=t},e.prototype.setPaused=function(){this.setPlaying(!1)},e.prototype.isPaused=function(){return this.active>0&&this.isPlaying===!1},e.prototype.play=function(t){this.playProgress(t)},e.prototype.pause=function(){this.setPaused(),console.log("is paused is ",this.isPaused())},e.prototype.playProgress=function(t){var e;null===this.hasStartedPlaying&&(this.hasStartedPlaying=!0),this.isPlaying===!1&&this.setPlaying(!0),e=Math.round(t/100*this.wavesCollection.length),this.active=e,this.redraw()},e.prototype.calcPercent=function(){return Math.round(this.clickPercent*this.width/(this.waveWidth+this.iGutterWidth))},e.prototype.getWaveClicked=function(t){var e,i,n;return i=Math.round(t/(this.waveWidth+this.iGutterWidth)),n=this.wavesCollection,e=0,e=i>n.length?n.length:0>i?0:i},e.prototype.getMousePosTrackTime=function(t){var e,i;return i=this.trackLength/this.wavesCollection.length*this.getWaveClicked(t),e=0,e=i>this.trackLength?this.trackLength:0>i?0:i},e}(n),e.exports=s,i.window.Waveform=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{observant:1}]},{},[2]);